!function(){function t(t){return i.push(t),i.length-1}function e(t){i.splice(t.id,1)}var n=this,i=[],l=[],s=function(e,n){var i=!1;return"undefined"==typeof e&&(i=!0),this._systemTimerReference=null,this._interval=e,this._callback=n,this._running=!1,this._paused=!1,this._systemTimerFunction=null,this._canBeKilled=!0,this._state={},i||(this.id=t(this)),"undefined"==typeof arguments[2]&&this.restart(),this};s.prototype.state=function(t,e){if("object"==typeof t)this._state=t;else{if("string"==typeof t&&"undefined"==typeof e)return this._state[t];if("string"!=typeof t||"undefined"==typeof e)return this._state;this._state[t]=e}},s.prototype.kill=function(){return this._canBeKilled?(TimersJS.cleanupCallback(this._systemTimerFunction),this.cancel(),e(this),this._systemTimerReference=null,null):this},s.prototype.systemTimer=function(t){return"undefined"!=typeof t&&(this._systemTimerReference=t),this._systemTimerReference},s.prototype.isRunning=function(){return this._running},s.prototype.cancel=function(){return n.clearTimeout(this.systemTimer()),this._systemTimerReference=null,this._running=!1,this},s.prototype.pause=function(){return this.cancel(),this._paused=!0,this},s.prototype.restart=function(){return this.cancel(),this.systemTimer(n.setTimeout(this.callback(),this.interval())),this._running=!0,this._paused=!1,this},s.prototype.killable=function(t){return"undefined"!=typeof t&&(this._canBeKilled=t),this._canBeKilled},s.prototype.callback=function(t){return"undefined"!=typeof t?(this._callback=t,this._systemTimerFunction=null,this.isRunning()&&this.restart()):null===this._systemTimerFunction&&(this._systemTimerFunction=function(){var t=arguments.callee,e=Date.now(),n=e-t.lastTime;t.lastTime=e,t.timerCallback&&t.timerCallback.call(t.timer,n,e)},this._systemTimerFunction.timerCallback=this._callback,this._systemTimerFunction.timer=this,this._systemTimerFunction.lastTime=Date.now()),this._systemTimerFunction},s.prototype.interval=function(t){return"undefined"!=typeof t&&(this.cancel(),this._interval=t),this._interval};var r=function(t,e){var n=function(t,e){var n=arguments.callee;n.timerCallback&&n.timerCallback.call(this,t,e),this.restart()};n.timerCallback=e,s.call(this,t,n)};r.prototype=new s,r.base=s.prototype;var a=function(t,e,i,l){var r=function(t,e){var i=arguments.callee;i.repetitions-- >0?(i.callbackFunction.call(this,i.totalRepetitions,t,e),i.totalRepetitions++,this.restart()):(i.completionCallback&&i.completionCallback.call(this,t,e),this.kill(),n.TimersJS.cleanupCallback(i))};r.callbackFunction=e,r.completionCallback=l,r.repetitions=i,r.totalRepetitions=0,s.call(this,t,r)};a.prototype=new s,a.base=s.prototype;var c=function(t,e){var i=function(t,e){arguments.callee.callbackFunction&&(arguments.callee.callbackFunction.call(this,t,e),this.kill(),n.TimersJS.cleanupCallback(arguments.callee))};i.callbackFunction=e,s.call(this,t,i)};c.prototype=new s,c.base=s.prototype,c.prototype.restart=function(){(this._paused||!this._running)&&c.base.restart.call(this)};var o=function(t,e,i,l){var s=function(t,e){var i=arguments.callee;i.interval.kill(),i.intervalCompletionCallback.call(this,t,e),n.TimersJS.cleanupCallback(i)};s.interval=new r(i,l),s.intervalCompletionCallback=e,c.call(this,t,s)};o.prototype=new c,o.base=c.prototype,n.TimersJS={cleanupCallback:function(t){l.push(t)},poolSize:function(){return i.length},pauseAllTimers:function(){for(var t=0;t<i.length;t++)i[t].pause()},restartAllTimers:function(){for(var t=0;t<i.length;t++)i[t].restart()},cancelAllTimers:function(){for(var t=0;t<i.length;t++)i[t].cancel()},killAllTimers:function(){for(var t=[];i.length>0;){var e=i.shift();e.killable()?e.kill():t.push(e)}i=t},timer:function(t,e){return new s(t,e)},repeater:function(t,e){return new r(t,e)},multi:function(t,e,n,i){return new a(t,n,e,i)},oneShot:function(t,e){return new c(t,e)},trigger:function(t,e,n,i){return new o(t,e,n,i)}},n.setInterval(function(){for(;l.length>0;)l[0]=null,l.shift()},500)}();