/*! jssocials - v1.1.0 - 2015-12-19
* http://js-socials.com
* Copyright (c) 2015 Artem Tabalin; Licensed MIT, changed by Alain Bailleul for ABMaterial */
!function(e,t,s){function r(e,s){var r=t(e);r.data(n,this),this._$element=r,this.shares=[],this._init(s),this._render()}var a="JSSocials",n=a,o=function(e,s){return t.isFunction(e)?e.apply(s,t.makeArray(arguments).slice(2)):e},i=/(\.(jpeg|png|gif|bmp)$|^data:image\/(jpeg|png|gif|bmp);base64)/i,h=/(&?[a-zA-Z0-9]+=)\{([a-zA-Z0-9]+)\}/g,l=/\{([a-zA-Z0-9]+)\}/g,u={G:1e9,M:1e6,K:1e3},c=[];r.prototype={url:"",text:"",showLabel:function(e){return this.showCount===!1?e>this.smallScreenWidth:e>=this.largeScreenWidth},showCount:function(e){return e<=this.smallScreenWidth?"inside":!0},smallScreenWidth:640,largeScreenWidth:1024,resizeTimeout:200,elementClass:"jssocials",sharesClass:"jssocials-shares",shareClass:"jssocials-share",shareButtonClass:"jssocials-share-button",shareLinkClass:"jssocials-share-link",shareLogoClass:"jssocials-share-logo",shareLabelClass:"jssocials-share-label",shareLinkCountClass:"jssocials-share-link-count",shareCountBoxClass:"jssocials-share-count-box",shareCountClass:"jssocials-share-count",shareZeroCountClass:"jssocials-share-no-count",_init:function(e){this._initDefaults(),t.extend(this,e),this._initShares(),this._attachWindowResizeCallback()},_initDefaults:function(){this.url=e.location.href,this.text=t.trim(t("meta[name=description]").attr("content")||t("title").text())},_initShares:function(){console.log(this.shares),this.shares=t.map(this.shares,t.proxy(function(e){"string"==typeof e&&(e={share:e});var s=e.share&&c[e.share];if(!s&&!e.renderer)throw Error("Share '"+e.share+"' is not found");return t.extend({url:this.url,text:this.text},s,e)},this))},_attachWindowResizeCallback:function(){t(e).on("resize",t.proxy(this._windowResizeHandler,this))},_detachWindowResizeCallback:function(){t(e).off("resize",this._windowResizeHandler)},_windowResizeHandler:function(){(t.isFunction(this.showLabel)||t.isFunction(this.showCount))&&(e.clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(t.proxy(this.refresh,this),this.resizeTimeout))},_render:function(){this._clear(),this._defineOptionsByScreen(),this._$element.addClass(this.elementClass),this._$shares=t("<div>").addClass(this.sharesClass).appendTo(this._$element),this._renderShares()},_defineOptionsByScreen:function(){this._screenWidth=t(e).width(),this._showLabel=o(this.showLabel,this,this._screenWidth),this._showCount=o(this.showCount,this,this._screenWidth)},_renderShares:function(){t.each(this.shares,t.proxy(function(e,t){this._renderShare(t)},this))},_renderShare:function(e){var s;s=t.isFunction(e.renderer)?t(e.renderer()):this._createShare(e),s.addClass(this.shareClass).addClass(e.share?"jssocials-share-"+e.share:"").addClass(e.css).appendTo(this._$shares)},_createShare:function(e){var s=t("<div>"),r=this._createShareLink(e).appendTo(s);if(this._showCount){var a="inside"===this._showCount,n=a?r:t("<div>").addClass(this.shareCountBoxClass).appendTo(s);n.addClass(a?this.shareLinkCountClass:this.shareCountBoxClass),this._renderShareCount(e,n)}return s},_createShareLink:function(e){var s=t("<a>").addClass(this.shareLinkClass).attr({href:this._getShareUrl(e),target:"_blank"}).append(this._createShareLogo(e));return t.each(this.on||{},function(r,a){t.isFunction(a)&&s.on(r,t.proxy(a,e))}),this._showLabel&&s.append(this._createShareLabel(e)),s},_getShareUrl:function(e){var t=o(e.shareUrl,e);return this._formatShareUrl(t,e)},_createShareLogo:function(e){var s=e.logo,r=i.test(s)?t("<img>").attr("src",e.logo):t("<i>").addClass(s);return r.addClass(this.shareLogoClass),r},_createShareLabel:function(e){return t("<span>").addClass(this.shareLabelClass).text(e.label)},_renderShareCount:function(e,s){var r=t("<span>").addClass(this.shareCountClass);s.addClass(this.shareZeroCountClass).append(r),this._loadCount(e).done(t.proxy(function(e){e&&(s.removeClass(this.shareZeroCountClass),r.text(e))},this))},_loadCount:function(e){var s=t.Deferred(),r=this._getCountUrl(e);if(!r)return s.resolve(0).promise();var a=t.proxy(function(t){s.resolve(this._getCountValue(t,e))},this);return t.getJSON(r).done(a).fail(function(){t.get(r).done(a).fail(function(){s.resolve(0)})}),s.promise()},_getCountUrl:function(e){var t=o(e.countUrl,e);return this._formatShareUrl(t,e)},_getCountValue:function(e,s){var r=(t.isFunction(s.getCount)?s.getCount(e):e)||0;return"string"==typeof r?r:this._formatNumber(r)},_formatNumber:function(e){return t.each(u,function(t,s){return e>=s?(e=parseFloat((e/s).toFixed(2))+t,!1):void 0}),e},_formatShareUrl:function(t,s){return t=t.replace(h,function(t,r,a){var n=s[a]||"";return n?r+e.encodeURIComponent(n):""}),t.replace(l,function(t,r){var a=s[r]||"";return a?e.encodeURIComponent(a):""})},_clear:function(){e.clearTimeout(this._resizeTimer),this._$element.empty()},_passOptionToShares:function(e,s){var r=this.shares;t.each(["url","text"],function(a,n){n===e&&t.each(r,function(t,r){r[e]=s})})},_normalizeShare:function(e){return t.isNumeric(e)?this.shares[e]:"string"==typeof e?t.grep(this.shares,function(t){return t.share===e})[0]:e},refresh:function(){this._render()},destroy:function(){this._clear(),this._detachWindowResizeCallback(),this._$element.removeClass(this.elementClass).removeData(n)},option:function(e,t){return 1===arguments.length?this[e]:(this[e]=t,this._passOptionToShares(e,t),void this.refresh())},shareOption:function(e,t,s){return e=this._normalizeShare(e),2===arguments.length?e[t]:(e[t]=s,void this.refresh())}},t.fn.jsSocials=function(e){var a=t.makeArray(arguments),o=a.slice(1),i=this;return this.each(function(){var a,h=t(this),l=h.data(n);if(l)if("string"==typeof e){if(a=l[e].apply(l,o),a!==s&&a!==l)return i=a,!1}else l._detachWindowResizeCallback(),l._init(e),l._render();else new r(h,e)}),i};var f=function(e){var s;t.isPlainObject(e)?s=r.prototype:(s=c[e],e=arguments[1]||{}),t.extend(s,e)};e.jsSocials={Socials:r,shares:c,setDefaults:f}}(window,jQuery),function(e,t,s,r){t.extend(s.shares,{whatsapp:{label:"WhatsApp",logo:"fa fa-whatsapp",shareUrl:"whatsapp://send?text={url} {text}",countUrl:""},email:{label:"E-mail",logo:"fa fa-at",shareUrl:"mailto:?subject={text}&body={url}",countUrl:""},twitter:{label:"Tweet",logo:"fa fa-twitter",shareUrl:"https://twitter.com/share?url={url}&text={text}&via={via}&hashtags={hashtags}",countUrl:""},facebook:{label:"Share",logo:"fa fa-facebook",shareUrl:"https://facebook.com/sharer/sharer.php?u={url}",countUrl:function(){return"https://graph.facebook.com/fql?q=SELECT total_count FROM link_stat WHERE url='"+e.encodeURIComponent(this.url)+"'"},getCount:function(e){return e.data.length&&e.data[0].total_count||0}},facebookextended:{label:"Share",logo:"fa fa-facebook",shareUrl:"https://www.facebook.com/dialog/feed?app_id={appid}&display=popup&caption={caption}&description={description}&link={url}&redirect_uri={redirecturl}&picture={pictureurl}",countUrl:function(){return"https://graph.facebook.com/fql?q=SELECT total_count FROM link_stat WHERE url='"+e.encodeURIComponent(this.url)+"'"},getCount:function(e){return e.data.length&&e.data[0].total_count||0}},facebooklike:{label:"Like",logo:"fa fa-facebook",shareUrl:"https://www.facebook.com/v2.3/plugins/like.php?locale=en_US&share=false&show_faces=false&href={url}",countUrl:function(){return"https://graph.facebook.com/fql?q=SELECT total_count FROM link_stat WHERE url='"+e.encodeURIComponent(this.url)+"'"},getCount:function(e){return e.data.length&&e.data[0].total_count||0}},googleplus:{label:"+1",logo:"fa fa-google-plus",shareUrl:"https://plus.google.com/share?url={url}",countUrl:function(){return"https://cors-anywhere.herokuapp.com/https://plusone.google.com/_/+1/fastbutton?url="+e.encodeURIComponent(this.url)},getCount:function(e){return parseFloat((e.match(/\{c: ([.0-9E]+)/)||[])[1])}},linkedin:{label:"Share",logo:"fa fa-linkedin",shareUrl:"https://www.linkedin.com/shareArticle?mini=true&url={url}",countUrl:"https://www.linkedin.com/countserv/count/share?format=jsonp&url={url}&callback=?",getCount:function(e){return e.count}},pinterest:{label:"Pin it",logo:"fa fa-pinterest",shareUrl:"https://pinterest.com/pin/create/bookmarklet/?media={media}&url={url}&description={text}",countUrl:"https://api.pinterest.com/v1/urls/count.json?&url={url}&callback=?",getCount:function(e){return e.count}}})}(window,jQuery,window.jsSocials);